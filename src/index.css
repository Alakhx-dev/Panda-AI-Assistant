@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Default variables (fallback) */
    --bg-main: #050510;
    --bg-card: rgba(20, 20, 40, 0.6);
    --text-main: #ffffff;
    --blur-strength: blur(16px);

    /* Shadcn/Tailwind mappings - HSL Values */
    --primary: 262 100% 59%;
    /* #7b2cff */
    --secondary: 190 100% 50%;
    /* #00d4ff */

    --background: 230 25% 4%;
    --foreground: 220 20% 92%;
    --card: 230 22% 7%;
    --card-foreground: 220 20% 92%;
    --popover: 230 22% 7%;
    --popover-foreground: 220 20% 92%;
    --primary-foreground: 0 0% 100%;
    --secondary-foreground: 0 0% 100%;
    --muted: 230 18% 13%;
    --muted-foreground: 220 10% 55%;
    --accent: 260 80% 60%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 230 18% 16%;
    --input: 230 18% 13%;
    --ring: 262 100% 59%;
    --radius: 0.75rem;

    /* Start with dark theme defaults for shadcn vars */
    --sidebar-background: 230 22% 5%;
    --sidebar-foreground: 220 10% 70%;
    --sidebar-primary: 262 100% 59%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 230 18% 10%;
    --sidebar-accent-foreground: 220 20% 92%;
    --sidebar-border: 230 18% 13%;
    --sidebar-ring: 262 100% 59%;
  }

  /* --- 1. Fusion Dark --- */
  [data-theme="fusion-dark"] {
    --bg-main: #050510;
    --bg-card: rgba(20, 20, 40, 0.6);
    --primary: 262 100% 59%;
    /* #7b2cff */
    --secondary: 190 100% 50%;
    /* #00d4ff */
    --text-main: #ffffff;
    --blur-strength: blur(16px);
  }

  /* --- 2. Neon Purple --- */
  [data-theme="neon-purple"] {
    --bg-main: radial-gradient(circle at 30% 20%, #1a0033, #000000);
    --bg-card: rgba(30, 0, 60, 0.5);
    --primary: 278 100% 57%;
    /* #b026ff */
    --secondary: 183 100% 50%;
    /* #00f0ff */
    --text-main: #ffffff;
    --blur-strength: blur(18px);
  }

  /* --- 3. Orange Inferno --- */
  [data-theme="orange-inferno"] {
    --bg-main: linear-gradient(135deg, #1a0f00, #000000);
    --bg-card: rgba(60, 20, 0, 0.6);
    --primary: 25 100% 50%;
    /* #ff6a00 */
    --secondary: 35 100% 64%;
    /* #ffb347 */
    --text-main: #ffffff;
    --blur-strength: blur(14px);
  }

  /* --- 4. Glass Light --- */
  [data-theme="glass-light"] {
    --bg-main: linear-gradient(135deg, #fdfbfb, #ebedee);
    --bg-card: rgba(255, 255, 255, 0.5);
    --primary: 262 100% 59%;
    /* #7b2cff */
    --secondary: 187 100% 41%;
    /* #00bcd4 */
    --text-main: #111111;
    --blur-strength: blur(20px);

    /* Light theme overrides for shadcn */
    --foreground: 220 20% 10%;
    --card-foreground: 220 20% 10%;
    --popover-foreground: 220 20% 10%;
    --muted-foreground: 220 10% 40%;
  }

  /* --- 5. Ocean Blue --- */
  [data-theme="ocean-blue"] {
    --bg-main: radial-gradient(circle at top, #001f3f, #000814);
    --bg-card: rgba(0, 30, 60, 0.6);
    --primary: 193 100% 50%;
    /* #00c6ff */
    --secondary: 213 100% 50%;
    /* #0072ff */
    --text-main: #ffffff;
    --blur-strength: blur(16px);
  }

  /* --- 6. Minimal Beige --- */
  [data-theme="minimal-beige"] {
    --bg-main: #f4f1ed;
    --bg-card: #ffffff;
    --primary: 0 15% 36%;
    /* #6b4f4f */
    --secondary: 30 34% 49%;
    /* #a67c52 */
    --text-main: #1c1c1c;
    --blur-strength: none;

    /* Light theme overrides */
    --foreground: 20 10% 20%;
    --card-foreground: 20 10% 20%;
  }

  /* --- 7. Midnight Pro --- */
  [data-theme="midnight-pro"] {
    --bg-main: linear-gradient(145deg, #0f2027, #203a43, #2c5364);
    --bg-card: rgba(10, 20, 30, 0.7);
    --primary: 174 100% 50%;
    /* #00ffe5 */
    --secondary: 312 100% 50%;
    /* #ff00cc */
    --text-main: #ffffff;
    --blur-strength: blur(18px);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* Scoped Transitions */
  html {
    transition: background 0.4s ease;
  }

  body,
  .card,
  .card-glass,
  .btn-primary,
  .user-bubble,
  .ai-bubble,
  .sidebar,
  button,
  input,
  textarea,
  .settings-panel {
    transition:
      background 0.4s ease,
      color 0.4s ease,
      box-shadow 0.4s ease,
      border-color 0.4s ease;
  }

  body {
    background: var(--bg-main);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    color: var(--text-main);
    font-family: 'Space Grotesk', system-ui, sans-serif;
    min-height: 100vh;
  }

  code,
  pre,
  .font-mono {
    font-family: 'JetBrains Mono', monospace;
  }
}

@layer components {
  .card {
    background: var(--bg-card);
    backdrop-filter: var(--blur-strength);
    -webkit-backdrop-filter: var(--blur-strength);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .card-glass {
    background: var(--bg-card);
    backdrop-filter: var(--blur-strength);
    -webkit-backdrop-filter: var(--blur-strength);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .btn-primary {
    background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));
    box-shadow: 0 0 20px hsl(var(--primary) / 0.5);
    color: white;
    font-weight: 600;
    border: none;
  }

  .btn-primary:hover {
    filter: brightness(1.1);
    box-shadow: 0 0 30px hsl(var(--secondary) / 0.5);
    transform: translateY(-1px);
  }

  .user-bubble {
    background: hsl(var(--primary));
    color: white;
  }

  .ai-bubble {
    background: var(--bg-card);
    backdrop-filter: var(--blur-strength);
    -webkit-backdrop-filter: var(--blur-strength);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .sidebar {
    background: var(--bg-card);
    backdrop-filter: var(--blur-strength);
    -webkit-backdrop-filter: var(--blur-strength);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Utility classes for direct usage */
  .bg-main {
    background: var(--bg-main);
  }

  .text-main {
    color: var(--text-main);
  }

  .bg-card-theme {
    background: var(--bg-card);
  }
}

@layer utilities {
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--secondary)));
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  /* Utilities for glow */
  .glow-blue {
    box-shadow: 0 0 15px hsl(var(--primary) / 0.3);
  }

  .glow-text {
    text-shadow: 0 0 20px hsl(var(--primary) / 0.5);
  }
}